!function(){if(!(d3&&d3.layout&&d3.geom))throw"force3D: Unable to inject d3.layout.force3D into d3.js . Be sure to load D3js beforehand.";var n=Math.abs;function t(n){return n[0]}function e(n){return n[1]}function r(n){return n[2]}function i(n){return"function"==typeof n?n:function(){return n}}function o(n){return n}function u(n){n.fixed|=2}function f(n){n.fixed&=-7}function a(n){n.fixed|=4,n.px=n.x,n.py=n.y}function c(n){n.fixed&=-5}function l(n){return n.x}function s(n){return n.y}function h(n){return n.z}function p(n,t,e,r,i,o,u,f){if(!n(t,e,r,i,o,u,f)){var a=.5*(e+o),c=.5*(r+u),l=.5*(i+f),s=t.nodes;s[0]&&p(n,s[0],e,r,i,a,c,l),s[1]&&p(n,s[1],a,r,i,o,c,l),s[2]&&p(n,s[2],e,c,i,a,u,l),s[3]&&p(n,s[3],a,c,i,o,u,l),s[4]&&p(n,s[4],e,r,l,a,c,f),s[5]&&p(n,s[5],a,r,l,o,c,f),s[6]&&p(n,s[6],e,c,l,a,u,f),s[7]&&p(n,s[7],a,c,l,o,u,f)}}function g(n,t,e,r,i,o,u,f,a,c){var l,s=1/0;return function n(h,p,g,y,d,x,z){if(!(p>f||g>a||y>c||d<i||x<o||z<u)){if(v=h.point){var v,N=t-h.x,k=e-h.y,m=r-h.z,b=N*N+k*k+m*m;if(b<s){var w=Math.sqrt(s=b);i=t-w,o=e-w,u=r-w,f=t+w,a=e+w,c=r+w,l=v}}for(var M=h.nodes,D=.5*(p+d),q=.5*(g+x),j=.5*(y+z),C=(r>=j)<<2|(e>=q)<<1|t>=D,A=C+8;C<A;++C)if(h=M[7&C])switch(7&C){case 0:n(h,p,g,y,D,q,j);break;case 1:n(h,D,g,y,d,q,j);break;case 2:n(h,p,q,y,D,x,j);break;case 3:n(h,D,q,y,d,x,j);break;case 4:n(h,p,g,j,D,q,z);break;case 5:n(h,D,g,j,d,q,z);break;case 6:n(h,p,q,j,D,x,z);break;case 7:n(h,D,q,j,d,x,z)}}}(n,i,o,u,f,a,c),l}function y(n,t,e){var r=0,i=0,o=0;if(n.charge=0,!n.leaf)for(var u,f=n.nodes,a=f.length,c=-1;++c<a;)null!=(u=f[c])&&(y(u,t,e),n.charge+=u.charge,r+=u.charge*u.cx,i+=u.charge*u.cy,o+=u.charge*u.cz);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5,n.point.z+=Math.random()-.5);var l=t*e[n.point.index];n.charge+=n.pointCharge=l,r+=l*n.point.x,i+=l*n.point.y,o+=l*n.point.z}n.cx=r/n.charge,n.cy=i/n.charge,n.cz=o/n.charge}d3.geom.octree=function(o,u,f,a,c,y,d){var x,z=t,v=e,N=r;if(x=arguments.length)return z=l,v=s,N=h,4===x&&(y=f,c=u,d=a,a=f=u=0),k(o);function k(t){var e,r,o,l,s,h,k,m,b,w,M,D,q=i(z),j=i(v),C=i(N);if(null!=u)k=u,m=f,b=a,w=c,M=y,D=d;else if(w=M=D=-(k=m=b=1/0),l=[],s=[],h=[],o=t.length,x)for(r=0;r<o;++r)(e=t[r]).x<k&&(k=e.x),e.y<m&&(m=e.y),e.z<b&&(b=e.z),e.x>w&&(w=e.x),e.y>M&&(M=e.y),e.z>D&&(D=e.z),l.push(e.x),s.push(e.y),h.push(e.z);else for(r=0;r<o;++r){var A=+q(e=t[r],r),B=+j(e,r),E=+C(e,r);A<k&&(k=A),B<m&&(m=B),E<b&&(b=E),A>w&&(w=A),B>M&&(M=B),E>D&&(D=E),l.push(A),s.push(B),h.push(E)}var S=w-k,U=M-m,F=D-b;function G(t,e,r,i,o,u,f,a,c,l,s){if(!(isNaN(r)||isNaN(i)||isNaN(o)))if(t.leaf){var h=t.x,p=t.y,g=t.z;if(null!=h)if(n(h-r)+n(p-i)+n(g-o)<.01)H(t,e,r,i,o,u,f,a,c,l,s);else{var y=t.point;t.x=t.y=t.z=t.point=null,H(t,y,h,p,g,u,f,a,c,l,s),H(t,e,r,i,o,u,f,a,c,l,s)}else t.x=r,t.y=i,t.z=o,t.point=e}else H(t,e,r,i,o,u,f,a,c,l,s)}function H(n,t,e,r,i,o,u,f,a,c,l){var s=.5*(o+a),h=.5*(u+c),p=.5*(f+l),g=e>=s,y=r>=h,d=i>=p,x=d<<2|y<<1|g;n.leaf=!1,g?o=s:a=s,y?u=h:c=h,d?f=p:l=p,G(n=n.nodes[x]||(n.nodes[x]={leaf:!0,nodes:[],point:null,x:null,y:null,z:null}),t,e,r,i,o,u,f,a,c,l)}S>=U&&S>=F?(M=m+S,D=b+S):U>=F&&U>=S?(w=k+U,D=b+U):(w=k+F,M=m+F);var I={leaf:!0,nodes:[],point:null,x:null,y:null,z:null,add:function(n){G(I,n,+q(n,++r),+j(n,r),+C(n,r),k,m,b,w,M,D)},visit:function(n){p(n,I,k,m,b,w,M,D)},find:function(n){return g(I,n[0],n[1],n[2],k,m,b,w,M,D)}};if(r=-1,null==u){for(;++r<o;)G(I,t[r],l[r],s[r],h[r],k,m,b,w,M,D);--r}else t.forEach(I.add);return l=s=h=t=e=null,I}return k.x=function(n){return arguments.length?(z=n,k):z},k.y=function(n){return arguments.length?(v=n,k):v},k.z=function(n){return arguments.length?(N=n,k):N},k.extent=function(n){return arguments.length?(null==n?u=f=a=c=y=d=null:(u=+n[0][0],f=+n[0][1],a=+n[0][2],c=+n[1][0],y=+n[1][1],d=+n[1][2]),k):null==u?null:[[u,f,a],[c,y,d]]},k.size=function(n){return arguments.length?(null==n?u=f=a=c=y=d=null:(u=f=a=0,c=+n[0],y=+n[1],d=+n[1]),k):null==u?null:[c-u,y-f,d-a]},k},d3.layout.force3D=function(){var n,t,e,r,i={},l=d3.dispatch("start","tick","end"),s=[1,1,1],h=.9,p=20,g=1,d=-30,x=1/0,z=.1,v=.64,N=[],k=[];function m(n){return function(t,e,r,i,o){if(t.point!==n){var u=t.cx-n.x,f=t.cy-n.y,a=t.cz-n.z,c=o-e,l=u*u+f*f+a*a;if(c*c/v<l){if(l<x){var s=t.charge/l;n.px-=u*s,n.py-=f*s,n.pz-=a*s}return!0}t.point&&l&&l<x&&(s=t.pointCharge/l,n.px-=u*s,n.py-=f*s,n.pz-=a*s)}return!t.charge}}function b(n){n.px=d3.event.x,n.py=d3.event.y,i.resume()}return i.tick=function(){if((n*=.99)<.005)return l.end({type:"end",alpha:n=0}),!0;var i,o,u,f,a,c,p,g,x,v,b=N.length,w=k.length;for(o=0;o<w;++o)f=(u=k[o]).source,(c=(g=(a=u.target).x-f.x)*g+(x=a.y-f.y)*x+(v=a.z-f.z)*v)&&(g*=c=n*e[o]*((c=Math.sqrt(c))-t[o])/c,x*=c,v*=c,a.x-=g*(p=f.weight/(a.weight+f.weight)),a.y-=x*p,a.z-=v*p,f.x+=g*(p=1-p),f.y+=x*p,f.z+=v*p);if((p=n*z)&&(g=s[0]/2,x=s[1]/2,v=s[2]/2,o=-1,p))for(;++o<b;)(u=N[o]).x+=(g-u.x)*p,u.y+=(x-u.y)*p,u.z+=(v-u.z)*p;if(d)for(y(i=d3.geom.octree(N),n,r),o=-1;++o<b;)(u=N[o]).fixed||i.visit(m(u));for(o=-1;++o<b;)(u=N[o]).fixed?(u.x=u.px,u.y=u.py,u.z=u.pz):(u.x-=(u.px-(u.px=u.x))*h,u.y-=(u.py-(u.py=u.y))*h,u.z-=(u.pz-(u.pz=u.z))*h);l.tick({type:"tick",alpha:n})},i.nodes=function(n){return arguments.length?(N=n,i):N},i.links=function(n){return arguments.length?(k=n,i):k},i.size=function(n){return arguments.length?(s=n,i):s},i.linkDistance=function(n){return arguments.length?(p="function"==typeof n?n:+n,i):p},i.distance=i.linkDistance,i.linkStrength=function(n){return arguments.length?(g="function"==typeof n?n:+n,i):g},i.friction=function(n){return arguments.length?(h=+n,i):h},i.charge=function(n){return arguments.length?(d="function"==typeof n?n:+n,i):d},i.chargeDistance=function(n){return arguments.length?(x=n*n,i):Math.sqrt(x)},i.gravity=function(n){return arguments.length?(z=+n,i):z},i.theta=function(n){return arguments.length?(v=n*n,i):Math.sqrt(v)},i.alpha=function(t){return arguments.length?(t=+t,n?n=t>0?t:0:t>0&&(l.start({type:"start",alpha:n=t}),d3.timer(i.tick)),i):n},i.start=function(){var n,o,u,f=N.length,a=k.length,c=s[0],l=s[1],h=s[2];for(n=0;n<f;++n)(u=N[n]).index=n,u.weight=0;for(n=0;n<a;++n)"number"==typeof(u=k[n]).source&&(u.source=N[u.source]),"number"==typeof u.target&&(u.target=N[u.target]),++u.source.weight,++u.target.weight;for(n=0;n<f;++n)u=N[n],isNaN(u.x)&&(u.x=y("x",c)),isNaN(u.y)&&(u.y=y("y",l)),isNaN(u.z)&&(u.z=y("z",h)),isNaN(u.px)&&(u.px=u.x),isNaN(u.py)&&(u.py=u.y),isNaN(u.pz)&&(u.pz=u.z);if(t=[],"function"==typeof p)for(n=0;n<a;++n)t[n]=+p.call(this,k[n],n);else for(n=0;n<a;++n)t[n]=p;if(e=[],"function"==typeof g)for(n=0;n<a;++n)e[n]=+g.call(this,k[n],n);else for(n=0;n<a;++n)e[n]=g;if(r=[],"function"==typeof d)for(n=0;n<f;++n)r[n]=+d.call(this,N[n],n);else for(n=0;n<f;++n)r[n]=d;function y(t,e){if(!o){for(o=new Array(f),c=0;c<f;++c)o[c]=[];for(c=0;c<a;++c){var r=k[c];o[r.source.index].push(r.target),o[r.target.index].push(r.source)}}for(var i,u=o[n],c=-1,l=u.length;++c<l;)if(!isNaN(i=u[c][t]))return i;return Math.random()*e}return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){var n;if(n||(n=d3.behavior.drag().origin(o).on("dragstart.force",u).on("drag.force",b).on("dragend.force",f)),!arguments.length)return n;this.on("mouseover.force",a).on("mouseout.force",c).call(n)},d3.rebind(i,l,"on")}}();